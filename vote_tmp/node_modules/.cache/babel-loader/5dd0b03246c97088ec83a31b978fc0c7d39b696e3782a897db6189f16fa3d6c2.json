{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, withModifiers as _withModifiers, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"poll-form\"\n};\nconst _hoisted_2 = [\"onUpdate:modelValue\"];\nconst _hoisted_3 = [\"onClick\"];\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = {\n  key: 0,\n  class: \"error\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[5] || (_cache[5] = _createElementVNode(\"h2\", null, \"Create a new poll\", -1 /* HOISTED */)), _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.createPoll && $options.createPoll(...args), [\"prevent\"]))\n  }, [_cache[3] || (_cache[3] = _createElementVNode(\"label\", null, \"Question:\", -1 /* HOISTED */)), _withDirectives(_createElementVNode(\"input\", {\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.poll.question = $event),\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.poll.question]]), _cache[4] || (_cache[4] = _createElementVNode(\"label\", null, \"Options:\", -1 /* HOISTED */)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.poll.options, (option, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: index\n    }, [_withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      \"onUpdate:modelValue\": $event => $data.poll.options[index] = $event,\n      placeholder: \"Option\",\n      required: \"\"\n    }, null, 8 /* PROPS */, _hoisted_2), [[_vModelText, $data.poll.options[index]]]), _createElementVNode(\"button\", {\n      type: \"button\",\n      onClick: $event => $options.removeOption(index)\n    }, \"Remove\", 8 /* PROPS */, _hoisted_3)]);\n  }), 128 /* KEYED_FRAGMENT */)), _createElementVNode(\"button\", {\n    type: \"button\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.addOption && $options.addOption(...args))\n  }, \"Add Option\"), _createElementVNode(\"button\", {\n    type: \"submit\",\n    disabled: !$options.canCreatePoll\n  }, \"Create Poll\", 8 /* PROPS */, _hoisted_4)], 32 /* NEED_HYDRATION */), $data.errorMessage ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, _toDisplayString($data.errorMessage), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","key","_createElementBlock","_hoisted_1","_createElementVNode","onSubmit","_cache","_withModifiers","args","$options","createPoll","type","$event","$data","poll","question","required","_Fragment","_renderList","options","option","index","placeholder","_hoisted_2","onClick","removeOption","_hoisted_3","addOption","disabled","canCreatePoll","_hoisted_4","errorMessage","_hoisted_5","_toDisplayString","_createCommentVNode"],"sources":["C:\\Users\\Алексей\\Desktop\\Projects\\vue-tmp\\vote_tmp\\src\\components\\VotePollForm.vue"],"sourcesContent":["<template>\r\n  <div class=\"poll-form\">\r\n    <h2>Create a new poll</h2>\r\n    <form @submit.prevent=\"createPoll\">\r\n      <label>Question:</label>\r\n      <input type=\"text\" v-model=\"poll.question\" required />\r\n\r\n      <label>Options:</label>\r\n      <div v-for=\"(option, index) in poll.options\" :key=\"index\">\r\n        <input type=\"text\" v-model=\"poll.options[index]\" placeholder=\"Option\" required />\r\n        <button type=\"button\" @click=\"removeOption(index)\">Remove</button>\r\n      </div>\r\n\r\n      <button type=\"button\" @click=\"addOption\">Add Option</button>\r\n      <button type=\"submit\" :disabled=\"!canCreatePoll\">Create Poll</button>\r\n    </form>\r\n    <div v-if=\"errorMessage\" class=\"error\">{{ errorMessage }}</div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      poll: {\r\n        question: '',\r\n        options: ['']\r\n      },\r\n      errorMessage: ''\r\n    };\r\n  },\r\n  computed: {\r\n    canCreatePoll() {\r\n      const nonEmptyOptions = this.poll.options\r\n        .map(option => option.trim())\r\n        .filter(option => option !== '');\r\n\r\n      const uniqueOptions = [...new Set(nonEmptyOptions)];\r\n      return uniqueOptions.length >= 2 && uniqueOptions.length === nonEmptyOptions.length;\r\n    }\r\n  },\r\n  methods: {\r\n    addOption() {\r\n      this.poll.options.push('');\r\n    },\r\n    removeOption(index) {\r\n      this.poll.options.splice(index, 1);\r\n    },\r\n    createPoll() {\r\n      this.errorMessage = ''; // Сбрасываем сообщение об ошибке\r\n\r\n      const nonEmptyOptions = this.poll.options\r\n        .map(option => option.trim())\r\n        .filter(option => option !== '');\r\n\r\n      const uniqueOptions = [...new Set(nonEmptyOptions)];\r\n\r\n      if (nonEmptyOptions.length < 2) {\r\n        this.errorMessage = 'Please ensure there are at least 2 options.'; // Проверка на количество опций\r\n      } else if (uniqueOptions.length < nonEmptyOptions.length) {\r\n        this.errorMessage = 'Options must be unique.'; // Проверка на уникальность опций\r\n      } else {\r\n        this.$emit('poll-created', { ...this.poll });\r\n        this.poll.question = '';\r\n        this.poll.options = [''];\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.error {\r\n  color: red;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n"],"mappings":";;EACOA,KAAK,EAAC;AAAW;mBADxB;mBAAA;mBAAA;;EAAAC,GAAA;EAgB6BD,KAAK,EAAC;;;uBAfjCE,mBAAA,CAgBM,OAhBNC,UAgBM,G,0BAfJC,mBAAA,CAA0B,YAAtB,mBAAiB,sBACrBA,mBAAA,CAYO;IAZAC,QAAM,EAAAC,MAAA,QAAAA,MAAA,MAHjBC,cAAA,KAAAC,IAAA,KAG2BC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;gCAC/BJ,mBAAA,CAAwB,eAAjB,WAAS,sB,gBAChBA,mBAAA,CAAsD;IAA/CO,IAAI,EAAC,MAAM;IALxB,uBAAAL,MAAA,QAAAA,MAAA,MAAAM,MAAA,IAKkCC,KAAA,CAAAC,IAAI,CAACC,QAAQ,GAAAH,MAAA;IAAEI,QAAQ,EAAR;iDAAfH,KAAA,CAAAC,IAAI,CAACC,QAAQ,E,6BAEzCX,mBAAA,CAAuB,eAAhB,UAAQ,uB,kBACfF,mBAAA,CAGMe,SAAA,QAXZC,WAAA,CAQqCL,KAAA,CAAAC,IAAI,CAACK,OAAO,EARjD,CAQmBC,MAAM,EAAEC,KAAK;yBAA1BnB,mBAAA,CAGM;MAHwCD,GAAG,EAAEoB;IAAK,I,gBACtDjB,mBAAA,CAAiF;MAA1EO,IAAI,EAAC,MAAM;MAT1B,uBAAAC,MAAA,IASoCC,KAAA,CAAAC,IAAI,CAACK,OAAO,CAACE,KAAK,IAAAT,MAAA;MAAGU,WAAW,EAAC,QAAQ;MAACN,QAAQ,EAAR;4BAT9EO,UAAA,I,cASoCV,KAAA,CAAAC,IAAI,CAACK,OAAO,CAACE,KAAK,G,GAC9CjB,mBAAA,CAAkE;MAA1DO,IAAI,EAAC,QAAQ;MAAEa,OAAK,EAAAZ,MAAA,IAAEH,QAAA,CAAAgB,YAAY,CAACJ,KAAK;OAAG,QAAM,iBAVjEK,UAAA,E;kCAaMtB,mBAAA,CAA4D;IAApDO,IAAI,EAAC,QAAQ;IAAEa,OAAK,EAAAlB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAkB,SAAA,IAAAlB,QAAA,CAAAkB,SAAA,IAAAnB,IAAA,CAAS;KAAE,YAAU,GACnDJ,mBAAA,CAAqE;IAA7DO,IAAI,EAAC,QAAQ;IAAEiB,QAAQ,GAAGnB,QAAA,CAAAoB;KAAe,aAAW,iBAdlEC,UAAA,E,4BAgBejB,KAAA,CAAAkB,YAAY,I,cAAvB7B,mBAAA,CAA+D,OAA/D8B,UAA+D,EAAAC,gBAAA,CAArBpB,KAAA,CAAAkB,YAAY,oBAhB1DG,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}